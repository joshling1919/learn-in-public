# 2020-07-21[[today-i-learned]]

## [[ssl]]

Airbrake stopped working for a Rails project. Whenever a call is made to
Airbrake, the following error happens: 

```shell
[Airbrake] Unable to contact the
Airbrake server. HTTP Error=SSL_connect returned=1 errno=0 state=error:
certificate verify failed.
```

According to [this blog
post](https://blog.engineyard.com/ruby-ssl-error-certificate-verify-failed):

> HTTPS is secured using an SSL certificate. Secure Sockets Layer, or SSL, is the
> security protocol that provides secure communication between two machines.

With SSL, `machine 1` looks at the SSL certificate of machine 2. Machine 1 uses
numbers in `machine 2`'s certificate to encrypt messages that it sends to
`machine 2`.

When `machine 1` connects to `machine 2`, `machine 1` has to verify that
`machine 2`'s certificate is valid. The SSL certificate is signed by a
Certificate Authority to prove its authenticity. Apparently the certificate
authorities are then also signed by another authority, and this goes on until it
reaches a root certificate.

In the case of our error, this either happened because our machine's certificate
has issues or because Airbrake's has issues.

It's likely our machine's certificate. The blog post offered two solutions:

1. Fix machine certificates.
2. Fix by updating gems. Apparently some ruby gems specify their own Certificate
   Authority certificates, like ActiveMerchant.

### [[open-questions]]

Here are the things I still don't get:
- [ ] If anyone can just look at `machine 2`'s certificate, then how does `machine
   2` know who to trust, and how can it be sure that `machine 1` is actually who
   it says it is? (The blog post mentioned SSL handshake but did not go into
   details.) 

[//begin]: # "Autogenerated link references for markdown compatibility"
[today-i-learned]: ../today-i-learned "Today I Learned"
[open-questions]: ../../misc/open-questions "Open Questions"
[//end]: # "Autogenerated link references"
